<!DOCTYPE html>
<html>
  <head>
    <title>Behavioural Science Jobs Board</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <header class="site-header">
      <div class="header-container">
        <%= link_to "Behavioural Science Jobs Board", root_path, class: "site-logo" %>
        
        <div class="menu-container">
          <button class="menu-toggle" onclick="toggleMenu()">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          
          <nav class="dropdown-menu" id="dropdownMenu">
            <%= link_to "Submit Job", new_job_submission_path, class: "dropdown-link" %>
            <%= link_to "About", about_path, class: "dropdown-link" %>
            <%= link_to "Admin", admin_job_postings_path, class: "dropdown-link" %>
          </nav>
        </div>
      </div>
    </header>

    <main>
      <%= yield %>
    </main>

    <script>
      function toggleMenu() {
        const menu = document.getElementById('dropdownMenu');
        const toggle = document.querySelector('.menu-toggle');
        menu.classList.toggle('show');
        toggle.classList.toggle('active');
      }

      // Close menu when clicking outside
      document.addEventListener('click', function(event) {
        const menuContainer = document.querySelector('.menu-container');
        if (!menuContainer.contains(event.target)) {
          document.getElementById('dropdownMenu').classList.remove('show');
          document.querySelector('.menu-toggle').classList.remove('active');
        }
      });
    </script>
  </body>
</html>